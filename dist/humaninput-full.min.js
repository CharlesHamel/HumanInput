!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["humaninput-full"]=e():(t.HumanInput=t.HumanInput||{},t.HumanInput["humaninput-full"]=e())}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(i){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){t.exports=e.HumanInput=n(6)}).call(e,n(0))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=s&&s.__esModule?function(){return s["default"]}:function(){return s};n.d(a,"a",a);var l=n(10),u=l&&l.__esModule?function(){return l["default"]}:function(){return l};n.d(u,"a",u);var c=n(7),h=c&&c.__esModule?function(){return c["default"]}:function(){return c};n.d(h,"a",h);var p=n(9),f=p&&p.__esModule?function(){return p["default"]}:function(){return p};n.d(f,"a",f);var d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),v=window.HumanInput,g=window.screen,w=window.document,m=["blur","click","compositionend","compositionstart","compositionupdate","contextmenu","copy","cut","focus","hold","input","keydown","keypress","keyup","paste","reset","select","submit"],y=[],_=[],E=[],S=0,b=!1,O=!1;Object.keys(window.KeyboardEvent.prototype).indexOf("key")!==-1&&(O=!0);var x=function(t){function e(r,a){i(this,e);var u,c={listenEvents:e.defaultListenEvents,addEvents:[],removeEvents:[],eventOptions:{},noKeyRepeat:!0,sequenceTimeout:3500,holdInterval:250,maxSequenceBuf:12,uniqueNumpad:!1,swipeThreshold:50,moveThreshold:5,disableSequences:!1,disableSelectors:!1,eventMap:{},translate:s.noop,logLevel:"INFO"};a=Object.assign(c,a);var h=new l.Logger(a.logLevel,n.i(s.getLoggingName)(r)),f=o(this,t.call(this,h));if(y.length)for(var d in y)if(y[d].elem===r){var v;return v=y[d],o(f,v)}y.push(f);var w=f;w.l=a.translate,a.listenEvents=a.listenEvents.concat(a.addEvents),a.removeEvents.length&&(a.listenEvents=a.listenEvents.filter(function(t){return!a.removeEvents.includes(t)})),w.settings=a,w.elem=n.i(s.getNode)(r||window),w.Logger=l.Logger,w.log=h,w.VERSION="1.1.0-modular",w.OSKEYS=["OS","OSLeft","OSRight"],w.CONTROLKEYS=["Control","ControlLeft","ControlRight"],w.ALTKEYS=["Alt","AltLeft","AltRight"],w.SHIFTKEYS=["Shift","ShiftLeft","ShiftRight","⇧"],w.ALLMODIFIERS=w.OSKEYS.concat(w.CONTROLKEYS,w.ALTKEYS,w.SHIFTKEYS),w.MODPRIORITY={},w.ControlKeyEvent="ctrl",w.ShiftKeyEvent="shift",w.AltKeyEvent="alt",w.OSKeyEvent="os",w.AltAltNames=["option","⌥"],w.AltOSNames=["meta","win","⌘","cmd","command"];var m=w.CONTROLKEYS.concat(["ctrl"]),_=w.ALTKEYS.concat(w.AltAltNames),E=w.OSKEYS.concat(w.AltOSNames);for(u=0;u<m.length;u++)w.MODPRIORITY[m[u].toLowerCase()]=5;for(u=0;u<w.SHIFTKEYS.length;u++)w.MODPRIORITY[w.SHIFTKEYS[u].toLowerCase()]=4;for(u=0;u<_.length;u++)w.MODPRIORITY[_[u].toLowerCase()]=3;for(u=0;u<E.length;u++)w.MODPRIORITY[E[u].toLowerCase()]=2;return w.keyMaps={0:{},1:{},2:{}},p.keyMaps&&(w.keyMaps=p.keyMaps),a.disableSequences&&(w._handleSeqEvents=s.noop),a.disableSelectors&&(w._handleSelectors=s.noop),w.elem===window&&w.on("window:resize",function(){window.outerWidth===g.width&&window.outerHeight===g.height?(w.state.fullscreen=!0,w.trigger("fullscreen",!0)):w.state.fullscreen&&(w.state.fullscreen=!1,w.trigger("fullscreen",!1))}),w.on("window:blur",w._resetStates),["_clipboard","_composition","_contextmenu","_holdCounter","_keydown","_keypress","_keyup","trigger"].forEach(function(t){w[t]=w[t].bind(w)}),w._compositionstart=w._composition,w._compositionupdate=w._composition,w._compositionend=w._composition,w._paste=w._clipboard,w._copy=w._clipboard,w._cut=w._clipboard,w._input=w._select,w.applyEvent=function(t){t.apply(w,arguments)},w.init(),f}return r(e,t),e.prototype.map=function(t){for(var e in t)this.eventMap.forward[e]=t[e],this.eventMap.reverse[t[e]]=e},e.prototype.init=function(){var t=this;t.eventCount&&t.trigger("hi:reset"),t.scope="",t.state={down:[],downAlt:[],holdStart:null,holdArgs:[],modifiers:{},seqBuffer:[]},t.events={},t.eventMap={forward:{},reverse:{}},t.map(t.settings.eventMap),b=!1;for(var e=0;e<_.length;e++){E[e]instanceof _[e]||(E[e]=new _[e](t));var i=E[e];if(t.log.debug(t.l("Initializing Plugin:"),i.NAME),n.i(s.isFunction)(i.init)){var o=i.init(t);for(var r in o.exports)t[r]=o.exports[r]}}t.off("hi:pause"),t.on("hi:pause",function(){t.log.debug(t.l("Pause: Removing event listeners ",t.settings.listenEvents)),t.settings.listenEvents.forEach(function(e){var i=t.settings.eventOptions[e]||!0;n.i(s.isFunction)(t["_"+e])&&t.elem.removeEventListener(e,t["_"+e],i)})}),t.off(["hi:initialized","hi:resume"]),t.on(["hi:initialized","hi:resume"],function(){t.log.debug("HumanInput Version: "+t.VERSION),t.log.debug(t.l("Start/Resume: Addding event listeners"),t.settings.listenEvents),t.settings.listenEvents.forEach(function(e){var i=t.settings.eventOptions[e]||!0;n.i(s.isFunction)(t["_"+e])?(t.elem.removeEventListener(e,t["_"+e],i),t.elem.addEventListener(e,t["_"+e],i)):(t["_"+e]=t._genericEvent.bind(t,""),t.elem.addEventListener(e,t["_"+e],i))})}),t.trigger("hi:initialized",t)},e.prototype.noConflict=function(){return window.HumanInput=v,e},e.prototype._resetStates=function(){this.state.modifiers={},this.state.seqBuffer=[],this.state.down=[],this.state.downAlt=[],this.state.holdArgs=[],S=0,b=!1,clearTimeout(this.state.holdTimeout),this.trigger("hi:resetstates")},e.prototype._resetSeqTimeout=function(){var t=this;clearTimeout(t.state.seqTimer),t.state.seqTimer=setTimeout(function(){t.log.debug(t.l("Resetting event sequence states due to timeout")),t._resetStates()},t.settings.sequenceTimeout)},e.prototype._genericEvent=function(t,e){var i,o=this.filter(e);o&&(t.type&&(e=t,t=null),t?t+=":":t="",i=this.trigger(this.scope+t+e.type,e),e.target&&(i=i.concat(this._handleSelectors(t+e.type,e))),n.i(s.handlePreventDefault)(e,i))},e.prototype._sortEvents=function(t){var e=this.MODPRIORITY;return t.sort(function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}),t.sort(function(t,e){return e.length-t.length}),t.sort(function(t,n){return t=t.toLowerCase(),n=n.toLowerCase(),t in e?n in e?e[t]>e[n]?-1:e[t]<e[n]?1:0:-1:n in e?1:0}),t},e.prototype._handleSelectors=function(t){var e,n=[],i=Array.from(arguments).slice(1),o=this;if(i[0]&&i[0].target&&(o=i[0].target,o.id&&(e=t+":#"+o.id,n=this.trigger.apply(o,[e].concat(i))),o.classList&&o.classList.length))for(var r=0;r<o.classList.length;r++)e=t+":."+o.classList.item(r),n=n.concat(this.trigger.apply(o,[e].concat(i)));return n},e.prototype._addDown=function(t,e){var n=this.state.down.indexOf(t);n===-1&&(n=this.state.downAlt.indexOf(t)),n===-1&&e&&(n=this.state.downAlt.indexOf(e)),n===-1&&(this.state.down.push(t),e?this.state.downAlt.push(e):this.state.downAlt.push(t)),this.trigger("hi:adddown",t,e)},e.prototype._removeDown=function(t){var e=this.state.down.indexOf(t);clearTimeout(this.state.holdTimeout),e===-1&&(e=this.state.downAlt.indexOf(t)),e===-1&&(e=this.state.downAlt.indexOf(t.toUpperCase())),e!==-1&&(this.state.down.splice(e,1),this.state.downAlt.splice(e,1)),S=this.state.down.length,this.settings.listenEvents.includes("hold")&&(this.state.holdArgs.pop(),this.state.heldTime=this.settings.holdInterval,this.state.holdStart=Date.now(),this.state.down.length&&(this.state.holdTimeout=setTimeout(this._holdCounter,this.settings.holdInterval))),this.trigger("hi:removedown",t)},e.prototype._doDownEvent=function(t){var e=Array.from(arguments).slice(1);this._addDown(t);var n=this._handleDownEvents.apply(this,e);return this._handleSeqEvents(e[0]),this._removeDown(t),n},e.prototype._keyEvent=function(t){return this.CONTROLKEYS.indexOf(t)!==-1?this.ControlKeyEvent:this.ALTKEYS.indexOf(t)!==-1?this.AltKeyEvent:this.SHIFTKEYS.indexOf(t)!==-1?this.ShiftKeyEvent:this.OSKEYS.indexOf(t)!==-1?this.OSKeyEvent:t.toLowerCase()},e.prototype._contextmenu=function(t){if(this.filter(t)){var e=this._triggerWithSelectors(t.type,[t]);n.i(s.handlePreventDefault)(t,e)||this._resetStates()}},e.prototype._handleShifted=function(t){var e=t.length-1,n=-1;if(this.state.modifiers.shift)for(var i=0;i<t.length&&(n=t[i].indexOf("Shift"),n===-1);i++);if(n!==-1&&t[e]!=this.state.downAlt[e])return t.splice(n,1),!0},e.prototype._handleDownEvents=function(){for(var t,e=this._downEvents(),n=Array.from(arguments),i=0;i<e.length;i++)t=this._triggerWithSelectors(e[i],n);return this.settings.listenEvents.includes("hold")&&(this.state.holdArgs.push(n),this.state.heldTime=this.settings.holdInterval,this.state.holdStart=Date.now(),clearTimeout(this.state.holdTimeout),this.state.holdTimeout=setTimeout(this._holdCounter,this.settings.holdInterval)),t},e.prototype._handleSeqEvents=function(t){var e,n=this.state.down.slice(0);if(S<n.length&&this.sequenceFilter(t)&&(this._handleShifted(n),this._sortEvents(n),this.state.seqBuffer.push(n),this.state.seqBuffer.length>this.settings.maxSequenceBuf&&this.state.seqBuffer.shift(),this.state.seqBuffer.length>1)){for(var i=this._seqCombinations(this.state.seqBuffer),o=0;o<i.length;o++)for(var r=this._seqSlicer(i[o]),s=0;s<r.length;s++)e=this.trigger(this.scope+r[s],this);e.length&&(this.state.seqBuffer=[])}this._resetSeqTimeout()},e.prototype._normSpecial=function(t,e,n){if(" "==e)return n;if(n.includes("Left")||n.includes("Right"))e=n;else if(this.settings.uniqueNumpad&&3===t)return"numpad"+e;return e.startsWith("Arrow")&&(e=e.substr(5)),e},e.prototype._setModifiers=function(t,e){this.ALLMODIFIERS.indexOf(t)&&(this.SHIFTKEYS.indexOf(t)!==-1&&(this.state.modifiers.shift=e),this.CONTROLKEYS.indexOf(t)!==-1&&(this.state.modifiers.ctrl=e),this.ALTKEYS.indexOf(t)!==-1&&(this.state.modifiers.alt=e,this.state.modifiers.option=e,this.state.modifiers["⌥"]=e),this.OSKEYS.indexOf(t)!==-1&&(this.state.modifiers.meta=e,this.state.modifiers.command=e,this.state.modifiers.os=e,this.state.modifiers["⌘"]=e),this.state.modifiers[t]=e)},e.prototype._holdCounter=function(){var t=this,e=t._downEvents();if(e.length){clearTimeout(t.state.holdTimeout);var n=t.state.holdArgs[t.state.holdArgs.length-1]||[],i=Date.now()-t.state.holdStart;t._resetSeqTimeout();for(var o=0;o<e.length;o++)t.trigger("hold",e[o],i),t._triggerWithSelectors("hold:"+t.state.heldTime+":"+e[o],n.concat([i]));t.state.heldTime+=t.settings.holdInterval,t.state.heldTime<5001&&(t.state.holdTimeout=setTimeout(t._holdCounter,t.settings.holdInterval))}},e.prototype._triggerWithSelectors=function(t,e){var n=[],i=this.scope+t;return n=n.concat(this.trigger.apply(this,[i].concat(e))),n=n.concat(this._handleSelectors.apply(this,[i].concat(e)))},e.prototype._seqSlicer=function(t){var e,n,i,o=[];for(t=t.split(/ +(?=(?:(?:[^"]*"){2})*[^"]*$)/g),e=0;e<t.length-1;e++)n=t.slice(e),i=n.join(" "),o.indexOf(i)===-1&&o.push(i);return o},e.prototype._seqCombinations=function(t,e){var i,o,r=e||"-",a=n.i(s.cloneArray)(t),l=[],u=[];for(i=0;i<t.length;i++)l.push(a[i].join(r).toLowerCase());for(l=[l.join(" ")],i=0;i<t.length;i++)for(o=0;o<t[i].length;o++)a[i][o]=[this._keyEvent(t[i][o])];for(i=0;i<a.length;i++)a[i].length&&u.push(n.i(s.arrayCombinations)(a[i],r));for(i=0;i<u.length;i++)u[i]=this.eventMap.forward[u[i]]||u[i];return u=u.join(" "),u!=l[0]&&l.push(u),l},e.prototype._downEvents=function(){var t,e=[],n=this.state.down.slice(0),i=n.length,o=this.state.downAlt.slice(0);if(i){if(1===i)return this._seqCombinations([n]);i>1&&(t=this._handleShifted(n),e=e.concat(this._seqCombinations([n],"->")),t&&(e=e.concat(this._seqCombinations([o],"->")))),n.length>1&&(this._sortEvents(n),e=e.concat(this._seqCombinations([n]))),t&&(this._sortEvents(o),e=e.concat(this._seqCombinations([o])))}return e},e.prototype._keydown=function(t){var e,i=t.which||t.keyCode,o=t.location||0,r=this.keyMaps[o][i]||this.keyMaps[0][i]||t.code,a=t.key||r,l=t.type,u=this.scope+"faceplant";return t.repeat&&this.settings.noKeyRepeat?(t.preventDefault(),!1):(a=this._normSpecial(o,a,r),this._setModifiers(a,!0),"Compose"==a?void(this.state.composing=!0):(this.state.down.indexOf(a)===-1&&this._addDown(a,r),this._resetSeqTimeout(),void(this.filter(t)&&(e=this._triggerWithSelectors(l,[t,a,r]),e=e.concat(this._triggerWithSelectors(l+=":"+a.toLowerCase(),[t,a,r])),this.state.down.length>5&&(e=e.concat(this.trigger(u,t))),O&&(e=e.concat(this._handleDownEvents(t,a,r))),n.i(s.handlePreventDefault)(t,e)))))},e.prototype._keypress=function(t){var e=t.charCode||t.which,n=t.key||String.fromCharCode(e);!O&&e>47&&n.length&&(this.state.down.pop(),this.state.down.push(n))},e.prototype._keyup=function(t){var e,i=t.which||t.keyCode,o=t.location||0,r=this.keyMaps[o][i]||this.keyMaps[0][i]||t.code,a=t.key||r,l=t.type;if(a=this._normSpecial(o,a,r),this.state.downAlt.length){if(this.state.composing)return void(this.state.composing=!1);this.filter(t)&&(O||this._handleDownEvents(t),e=this._triggerWithSelectors(l,[t,a,r]),e=e.concat(this._triggerWithSelectors(l+":"+a.toLowerCase(),[t,a,r])),this._handleSeqEvents(t),n.i(s.handlePreventDefault)(t,e)),this._removeDown(a),this._setModifiers(r,!1)}},e.prototype._composition=function(t){var e=t.data,i="compos";if(this.filter(t)){var o=this._triggerWithSelectors(t.type,[t,e]);e&&("compositionupdate"==t.type?i+='ing:"'+e+'"':"compositionend"==t.type&&(i+='ed:"'+e+'"'),o=o.concat(this._triggerWithSelectors(i,[t])),n.i(s.handlePreventDefault)(t,o))}},e.prototype._clipboard=function(t){var e,i=t.type+':"';if(this.filter(t)&&(window.clipboardData?e=window.clipboardData.getData("Text"):t.clipboardData&&(e=t.clipboardData.getData("text/plain")),e||"copy"!=t.type&&"cut"!=t.type||(e=this.getSelText()),e)){var o=this._triggerWithSelectors(t.type,[t,e]);o=o.concat(this._triggerWithSelectors(i+e+'"',[t])),n.i(s.handlePreventDefault)(t,o)}},e.prototype._select=function(t){var e=t.type+':"';if("select"==t.type)var i=self.getSelText();else if("input"==t.type)var i=t.data||t.target.value;if(self.filter(t)){var o=self._triggerWithSelectors(t.type,[t,i]);i&&(o=o.concat(self._triggerWithSelectors(e+i+'"',[t])),n.i(s.handlePreventDefault)(t,o))}},e.prototype.filter=function(t){var e=(t.target||t.srcElement).tagName,n=["keydown","keyup","keypress"];return!t.type||!n.includes(t.type)||!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},e.prototype.sequenceFilter=function(t){return!0},e.prototype.pushScope=function(t){this.scope.length?this.scope=this.scope.slice(0,-1)+"."+t+":":this.scope=t+":"},e.prototype.popScope=function(){this.scope.length&&(this.scope=this.scope.slice(0,-1).split(".").slice(0,-1).join(".")+":"),":"==this.scope&&(this.scope="")},e.prototype.pause=function(){this.state.paused=!0,this.trigger("hi:pause",this)},e.prototype.resume=function(){this.state.paused=!1,this.trigger("hi:resume",this)},e.prototype.startRecording=function(){this.recording=!0,recordedEvents=[]},e.prototype.stopRecording=function(t){var e,n=new RegExp(t),i=function(t){return t.indexOf(":#")===-1&&t.indexOf(":.")===-1};if(this.recording=!1,!t)return recordedEvents;if("keystroke"==t){var o=recordedEvents.filter(i);n=new RegExp("keyup");for(var r=0;r<o.length&&!n.test(o[r]);r++)e=o[r];return e}var s=recordedEvents.filter(function(t){return n.test(t)});return s},e.prototype.addListeners=function(t,e,n,i){e.forEach(function(e){t.addEventListener(e,n,i)})},e.prototype.removeListeners=function(t,e,n,i){e.forEach(function(e){t.removeEventListener(e,n,i)})},e.prototype.getSelText=function(){var t="";if(window.getSelection)t=window.getSelection();else{if(!w.selection)return;t=w.selection.createRange().text}return t.toString()},e.prototype.isDown=function(t){var e=this._downEvents();if(t=t.toLowerCase(),t=this.eventMap.reverse[t]||t,e.includes(t))return!0;for(var n=0;n<this.state.down.length;n++){var i=this.state.down[n].toLowerCase(),o=this.state.downAlt[n].toLowerCase();if(t==i||t==o)return!0;if(this.SHIFTKEYS.includes(this.state.down[n])){if(t==this.ShiftKeyEvent)return!0}else if(this.CONTROLKEYS.includes(this.state.down[n])){if(t==this.ControlKeyEvent)return!0}else if(this.ALTKEYS.includes(this.state.down[n])){if(t==this.AltKeyEvent)return!0}else if(this.OSKEYS.includes(this.state.down[n])&&t==this.OSKeyEvent)return!0}return!1},e.prototype.getDown=function(){for(var t=this._sortEvents(this.state.down.slice(0)),e=new RegExp("-$"),n="",i=0;i<t.length;i++)n+=this._keyEvent(t[i])+"-";return n.replace(e,"")},d(e,[{key:"instances",get:function(){return y}},{key:"plugins",get:function(){return _}}]),e}(c.EventHandler);e["default"]=x,x.instances=y,x.plugins=_,x.defaultListenEvents=m,t.exports=x},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(1),r=o&&o.__esModule?function(){return o["default"]}:function(){return o};n.d(r,"a",r),n.d(e,"EventHandler",function(){return a});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.aliases={tap:"click",taphold:"hold:1500:pointer:left",clickhold:"hold:1500:pointer:left",middleclick:"pointer:middle",rightclick:"pointer:right",doubleclick:"dblclick",konami:"up up down down left right left right b a enter",portrait:"window:orientation:portrait",landscape:"window:orientation:landscape",hulksmash:"faceplant",twofingertap:"multitouch:2:tap",threefingertap:"multitouch:3:tap",fourfingertap:"multitouch:4:tap"},this.events={},this.log=e,this.one=this.once,this.emit=this.trigger}return t.prototype._handleAliases=function(t){return t=this.aliases[t]||t,1===t.length&&n.i(o.isUpper)(t)&&(t="shift-"+t),t},t.prototype.on=function(t,e,i,r){var s=this;return n.i(o.normEvents)(t).forEach(function(t){if(t.indexOf(":")!==-1)var n=":";else if(t.indexOf(" ")!==-1)var n=" ";if(n){var o=new RegExp(n+'(?=(?:(?:[^"]*"){2})*[^"]*$)',"g"),a=t.split(o);t="";for(var l=0;l<a.length;l++)t+=s._handleAliases(a[l])+n;t=t.replace(new RegExp(n+"+$"),"")}else t=s._handleAliases(t);t=t.toLowerCase(),t.indexOf("-")!==-1&&t.indexOf("->")===-1&&(t=s._normCombo(t)),i||(i={});var u=s.events[t],c={callback:e,context:i,times:r};u||(u=s.events[t]=[]),u.push(c)}),s},t.prototype.once=function(t,e,n){return this.on(t,e,n,1)},t.prototype.off=function(t,e,i){if(arguments.length){t=t?n.i(o.normEvents)(t):Object.keys(this.events);for(var r=t,s=Array.isArray(r),a=0,r=s?r:r[Symbol.iterator]();;){var l;if(s){if(a>=r.length)break;l=r[a++]}else{if(a=r.next(),a.done)break;l=a.value}var u=l,c=t[u],h=this.events[c];if(h){var p=[];if(!i&&!e){delete this.events[c];break}for(var f=0;f<h.length;f++)e?h[f].callback.toString()==e.toString()&&(null!==i&&void 0!==i||!h[f].context)?n.i(o.isEqual)(h[f].context,i)||p.push(h[f]):p.push(h[f]):i&&h[f].context!==i&&p.push(h[f]);p.length?this.events[c]=p:delete this.events[c]}}}else this.events={};return this},t.prototype.trigger=function(t){var e=this,i=[],r=Array.from(arguments).slice(1);return n.i(o.normEvents)(t).forEach(function(t){t=e.aliases[t]||t,t=e.eventMap.forward[t]||t,e.log.debug("Triggering:",t,r.length?r:""),e.recording&&recordedEvents.push(t);var n=e.events[t];if(n)for(var o=0;o<n.length;o++){var s=n[o];s.context!==window&&(s.context.HIEvent=t),s.times&&(s.times-=1,0===s.times&&e.off(t,s.callback,s.context)),i.push(s.callback.apply(s.context||this,r))}}),i},s(t,[{key:"eventCount",get:function(){var t=0;for(var e in self.events)t++;return t}}]),t}()},function(t,e,n){"use strict";n.d(e,"keyMaps",function(){return o});for(var i=window.navigator.userAgent.indexOf("Mac OS X")!==-1,o={0:{Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,Left:37,ArrowUp:38,Up:38,ArrowRight:39,Right:39,ArrowDown:40,Down:40,PrintScreen:42,Insert:45,Delete:46,Semicolon:59,"=":61,OS:92,Select:93,NumLock:144,ScrollLock:145,VolumeDown:174,VolumeUp:175,MediaTrackPrevious:177,MediaPlayPause:179,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,AltGraph:225,Compose:229},1:{ShiftLeft:16,ControlLeft:17,AltLeft:18,OSLeft:91},2:{ShiftRight:16,ControlRight:17,AltRight:18,OSRight:92},3:{"*":106,"+":107,"-":109,".":46,"/":111}},r=48;r<=57;r++)o[0][r]=""+(r-48);for(var s=65;s<=90;s++)o[0][s]=String.fromCharCode(s);for(var a=96;a<=105;a++)o[3][a]="Numpad"+(a-96);for(var l=112;l<=123;l++)o[0][l]="F"+(l-112+1);if(i){var u={3:"Enter",63289:"NumpadClear",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"ArrowLeft",63232:"ArrowUp",63235:"ArrowRight",63233:"ArrowDown",63302:"Insert",63272:"Delete"};for(var c in u)o[0][c]=u[c];for(var h=63236;h<=63242;h++)o[0][h]="F"+(h-63236+1)}for(var p=function(t){Object.keys(o[t]).forEach(function(e){e.length>1&&!isNaN(e)&&(e=parseInt(e)),o[t][o[t][e]]=e})},f=0;f<=3;f++)p(f)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(11),r=n(1),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};n.d(s,"a",s),n.d(e,"Logger",function(){return l});var a={40:"ERROR",30:"WARNING",20:"INFO",10:"DEBUG",ERROR:40,WARNING:30,INFO:20,DEBUG:10},l=function(){function t(e,r){i(this,t),this.prefix=r,this.setLevel(e),this.writeErr=this.fallback,this.writeWarn=this.fallback,this.writeInfo=this.fallback,this.writeDebug=this.fallback,n.i(o.a)(window.console.error)&&(this.writeErr=window.console.error),n.i(o.a)(window.console.warn)&&(this.writeWarn=window.console.warn),n.i(o.a)(window.console.info)&&(this.writeInfo=window.console.info),n.i(o.a)(window.console.debug)&&(this.writeDebug=window.console.debug)}return t.prototype.setLevel=function(t){t=t.toUpperCase(),this.error=this.write.bind(this,40),this.warn=this.write.bind(this,30),this.info=this.write.bind(this,20),this.debug=this.write.bind(this,10),this.logLevel=t,isNaN(t)&&(this.logLevel=t=a[t]),t>40&&(this.error=r.noop),t>30&&(this.warn=r.noop),t>20&&(this.info=r.noop),t>10&&(this.debug=r.noop)},t.prototype.fallback=function(t){var e=Array.from(arguments);e[0]=this.prefix+a[t]+" "+e[0],n.i(o.a)(window.console.log)&&window.console.log.apply(window.console,e)},t.prototype.write=function(t){var e=Array.prototype.slice.call(arguments,1);this.prefix.length&&e.unshift(this.prefix),40===t&&this.logLevel<=40?this.writeErr.apply(window.console,e):30===t&&this.logLevel<=30?this.writeWarn.apply(window.console,e):20===t&&this.logLevel<=20?this.writeInfo.apply(window.console,e):10===t&&this.logLevel<=10&&this.writeDebug.apply(window.console,e)},t}()},function(t,e,n){"use strict";function i(t){return t}function o(t){var e="";return t.name?e+=" "+t.name:t.id?e+=" "+t.id:t.nodeName&&(e+=" "+t.nodeName),"[HI"+e+"]"}function r(t){if("string"==typeof t){var e=document.querySelector(t);return e}return t}function s(t){return h(t)?[t]:t}function a(t,e){if(e.includes(!1))return t.preventDefault(),!0}function l(t){if(y(t)){for(var e=t.slice(0),n=0;n<e.length;n++)e[n]=l(e[n]);return e}return t}function u(t,e){var n=[];if(1===t.length)return t[0];for(var i=u(t.slice(1),e),o=0;o<i.length;o++)for(var r=0;r<t[0].length;r++)n.push(t[0][r]+e+i[o]);return n}function c(t){return"[object Function]"==m.call(t)}function h(t){return"[object String]"==m.call(t)}function p(t){var e=Array.from(arguments).slice(1);return function(){return t.apply(this,e.concat(Array.from(arguments)))}}function f(t,e,n){var i,o;return function(){var r=this,s=arguments,a=function(){i=null,n||(o=t.apply(r,s))},l=n&&!i;return clearTimeout(i),i=setTimeout(a,e),l&&(o=t.apply(r,s)),o}}function d(t,e){return t&&e&&"object"===("undefined"==typeof t?"undefined":w(t))&&"object"===("undefined"==typeof e?"undefined":w(e))?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce(function(n,i){return n&&n(t[i],e[i])},!0):t===e}function v(t){if(t==t.toUpperCase()&&t!=t.toLowerCase())return!0}function g(t){for(var e=this,n=t.split("-"),i=function(t){return"control"==t?e.ControlKeyEvent:t},o=function(t){for(var n=0;n<e.AltAltNames.length;n++)if(t==e.AltAltNames[n])return e.AltKeyEvent;return t},r=function(t){for(var n=0;n<e.AltOSNames.length;n++)if(t==e.AltOSNames[n])return e.OSKeyEvent;return t},s=0;s<n.length;s++)n[s]=n[s].toLowerCase(),n[s]=i(n[s]),n[s]=o(n[s]),n[s]=r(n[s]);return e._sortEvents(n),n.join("-")}e.noop=i,e.getLoggingName=o,e.getNode=r,e.normEvents=s,e.handlePreventDefault=a,e.cloneArray=l,e.arrayCombinations=u,n.d(e,"toString",function(){return m}),e.isFunction=c,e.isString=h,n.d(e,"isArray",function(){return y}),e.partial=p,e.debounce=f,e.isEqual=d,e.isUpper=v,e._normCombo=g;var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},m=Object.prototype.toString,y=Array.isArray},function(t,e,n){(function(e){t.exports=e.HumanInput=n(3)}).call(e,n(0))},function(t,e,n){(function(e){t.exports=e.HumanInput=n(2)}).call(e,n(0))},function(t,e,n){(function(e){t.exports=e.HumanInput=n(4)}).call(e,n(0))},function(t,e,n){(function(e){t.exports=e.HumanInput=n(5)}).call(e,n(0))},function(t,e,n){"use strict";function i(t){var e=n.i(o.a)(t)?l.call(t):"";return e==r||e==s}var o=n(12),r="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,l=a.toString;e.a=i},function(t,e,n){"use strict";function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.a=i},function(t,e,n){"use strict";var i=n(8),o=i&&i.__esModule?function(){return i["default"]}:function(){return i};n.d(o,"a",o);var r=n(16),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};n.d(s,"a",s),t.exports=o.a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(1),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};n.d(s,"a",s),HumanInput=window.HumanInput;var a,l=["pan","pointerdown","pointerup","pointercancel","wheel"],u=["pan","mousedown","mouseup","touchstart","touchend","touchcancel","wheel"],c=!1,h=["pointermove"];c?HumanInput.defaultListenEvents=HumanInput.defaultListenEvents.concat(l):(HumanInput.defaultListenEvents=HumanInput.defaultListenEvents.concat(u),h=["mousemove","touchmove"]);var p=function(){function t(e){o(this,t);var n=this;n.HI=e,["_click","_dragendPointerup","_pointerdown","_pointerup","_pointercancel","_pointerMoveCheck","_trackMotion","_wheel"].forEach(function(t){e[t]=n[t].bind(e)}),e.on("hold",function(t){t.includes("pointer:")&&(e.removeListeners(window,h,e._pointerMoveCheck,!0),e.addListeners(window,h,e._pointerMoveCheck,!0))}),e.on("hi:resetstates",function(){e.removeListeners(window,h,e._pointerMoveCheck,!0),e.removeListeners(e.elem,h,e._trackMotion,!0)}),e._mousedown=e._pointerdown,e._touchstart=e._pointerdown,e._mouseup=e._pointerup,e._touchend=e._pointerup,e._touchcancel=e._pointercancel,e._tap=e._click,e.on("hi:resetstates",n._resetStates,e),e.on("hi:removedown",function(t){e.removeListeners(window,h,e._pointerMoveCheck,!0)}),e.on("hold",n._holdCheck,e)}return t.prototype.init=function(t){return t.state.multitap=0,t.state.pointerCount=0,t.state.pointers={},t.state.scrollX=0,t.state.scrollY=0,t.removeListeners(window,h,t._pointerMoveCheck,!0),t.removeListeners(t.elem,h,t._trackMotion,!0),this.exports={mouse:this.mouse},this},t.prototype._resetStates=function(){this.state.pointers={},this.state.pointerCount=0},t.prototype._holdCheck=function(t){t.includes("pointer:")&&(this.removeListeners(window,h,this._pointerMoveCheck,!0),this.addListeners(window,h,this._pointerMoveCheck,!0))},t.prototype._pointerMoveCheck=function(t){var e,n,o,r,s=this.settings.moveThreshold,a=this.state.pointers,l=t.touches,u=t.pointerType;if(u||"mousemove"==t.type)o=t.pointerId||1;else if(l&&l.length)for(i=0;i<l.length;i++)o=l[i].identifier;r=a[o],r&&(e=t.clientX||r.event.clientX,n=t.clientY||r.event.clientY,e&&n&&(Math.abs(r.x-e)>s||Math.abs(r.y-n)>s)&&(clearTimeout(this.state.holdTimeout),this.removeListeners(window,h,this._pointerMoveCheck,!0)))},t.prototype._trackMotion=function(t){var e,o,s=[],a="pan",l={},u=this.state.pointers,c=t.touches,h=t.pointerType;if(h||"mousemove"==t.type){if(e=t.pointerId||1,o=u[e],!o)return;o.event=t}else if(c&&c.length)for(i=0;i<c.length;i++){if(e=c[i].identifier,o=u[e],!o)return;o.event=c[i]}l.xOrig=o.x,l.yOrig=o.y,l.xPrev=o.xPrev||o.x,l.yPrev=o.yPrev||o.y,l.x=t.clientX||o.event.clientX,l.y=t.clientY||o.event.clientY,l.xMoved=l.x-l.xPrev,l.yMoved=l.y-l.yPrev,o.xPrev=l.x,o.yPrev=l.y,this._resetSeqTimeout(),this.filter(t)&&(this.state.pointerCount>1?(a="multitouch:",s=s.concat(this._triggerWithSelectors(a+"pan",[t,u])),s=s.concat(this._triggerWithSelectors(a+this.state.pointerCount+":pan",[t,u]))):s=s.concat(this._triggerWithSelectors(a,[t,l])),n.i(r.handlePreventDefault)(t,s))},t.prototype._dragendPointerup=function(t){var e=t.pointerId||1,n=this.state.pointers,i={bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY,isPrimary:!0,layerX:t.layerX,layerY:t.layerY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY,pointerId:e,pressure:t.pressure||0,relatedTarget:window,screenX:t.screenX,screenY:t.screenY,target:t.target,tiltX:t.tiltX||0,tiltY:t.tiltY||0,view:window,x:t.x,y:t.y};if(n[e]){if(c){new PointerEvent("pointerup",i)}else{new MouseEvent("mouseup",i)}this._pointerup(t),window.removeEventListener("dragend",this._dragendPointerup,!0)}},t.prototype._pointerdown=function(t){var e,i,o,s=this.mouse(t),l=t.changedTouches,u=t.pointerType,c="pointer",p=":down";if("mousedown"!=t.type||!a){if(u||"mousedown"==t.type)i=t.pointerId||1,this.state.pointers[i]={x:t.clientX,y:t.clientY,event:t,timestamp:Date.now()};else if(l&&l.length){for(e=0;e<l.length;e++)i=l[e].identifier,this.state.pointers[i]={x:l[e].clientX,y:l[e].clientY,event:l[e],timestamp:Date.now()};a=!0,s.buttonName="left"}window.addEventListener("dragend",this._dragendPointerup,!0),this.state.pointerCount++,(this.state.pointerCount>1||this.settings.listenEvents.indexOf("pan")!=-1)&&(this.removeListeners(window,h,this._trackMotion,!0),this.addListeners(window,h,this._trackMotion,!0)),this._addDown(c+":"+s.buttonName),this._resetSeqTimeout(),this.filter(t)&&(o=this._triggerWithSelectors(c+p,[t]),void 0!==s.buttonName&&(c+=":"+s.buttonName,o=o.concat(this._triggerWithSelectors(c+p,[t]))),o=o.concat(this._handleDownEvents(t)),n.i(r.handlePreventDefault)(t,o))}},t.prototype._pointerup=function(t){var e,i,o,s,l,u=this.settings.moveThreshold,c=t.clientX,p=t.clientY,f=this.state.pointers,d={},v=t.changedTouches,g=t.pointerType,w=this.settings.swipeThreshold,m="up",y="pointer:",_=this.filter(t);if("mouseup"!=t.type||!a){if(g||"mouseup"==t.type)i=t.pointerId||1;else if(v&&v.length)for(e=0;e<v.length;e++)i=v[e].identifier,c=v[e].clientX,p=v[e].clientY;f[i]&&(d.x=f[i].x-c,d.y=f[i].y-p),this._resetSeqTimeout(),_&&(l=this._triggerWithSelectors(y+m,[t]),o=this.mouse(t),y+=void 0!==o.buttonName?o.buttonName:"left",l=l.concat(this._triggerWithSelectors(y+":"+m,[t])),
s="swipe:",Math.abs(d.x)>Math.abs(d.y)?d.x>w?s+="left":d.x<-w&&(s+="right"):d.y>w?s+="up":d.y<-w&&(s+="down")),delete f[i],this.state.pointerCount--,this.state.pointerCount>0?d.x<u&&d.y<u?this.state.multitap++:this.state.multitap=0:(this.state.multitap?(s="multitouch:"+(this.state.multitap+1)+":tap",l=this._triggerWithSelectors(s,[t]),this._removeDown(y),this._addDown(s),_&&(l=l.concat(this._handleDownEvents(t)),this._handleSeqEvents(t)),this._removeDown(s),this.state.multitap=0):"swipe:"!=s?(this._addDown(s),_&&(l=l.concat(this._handleDownEvents(t)),this._handleSeqEvents(t)),this._removeDown(s)):(_&&this._handleSeqEvents(t),this._removeDown(y)),n.i(r.handlePreventDefault)(t,l),this.removeListeners(window,h,this._trackMotion,!0))}},t.prototype._pointercancel=function(t){var e,n,i=this.state.pointers,o=t.changedTouches,r=t.pointerType,s="pointer:",a=this.mouse(t);if(r||t.type.indexOf("mouse")!==-1)n=t.pointerId||1,i[n]&&delete i[n];else if(o&&o.length){for(e=0;e<o.length;e++)n=o[e].identifier,i[n]&&delete i[n];a.buttonName="left"}this._removeDown(s+a.buttonName),this.state.pointerCount--,this.state.pointerCount||this.removeListeners(window,h,this._trackMotion,!0)},t.prototype._click=function(t){var e=t.type,i=t.detail;if(2===i?e="dblclick":3===i&&(e="tripleclick"),this._resetSeqTimeout(),this.filter(t)){this._addDown(e);var o=this._handleDownEvents(t);this._removeDown(e),n.i(r.handlePreventDefault)(t,o)}},t.prototype._wheel=function(t){var e="wheel";if(this._resetSeqTimeout(),this.filter(t)){var i=this._triggerWithSelectors(e,[t]);t.deltaY>0?i=i.concat(this._doDownEvent(e+":down",t)):t.deltaY<0&&(i=i.concat(this._doDownEvent(e+":up",t))),t.deltaZ>0?i=i.concat(this._doDownEvent(e+":out",t)):t.deltaZ<0&&(i=i.concat(this._doDownEvent(e+":in",t))),t.deltaX>0?(i=i.concat(this._doDownEvent(e+":right",t)),this.isDown("shift")&&(i=i.concat(this._triggerWithSelectors(e+":right",[t])))):t.deltaX<0&&(i=i.concat(this._doDownEvent(e+":left",t)),this.isDown("shift")&&(i=i.concat(this._triggerWithSelectors(e+":left",[t])))),n.i(r.handlePreventDefault)(t,i)}},t.prototype.mouse=function(t){var e={type:t.type};return"mousemove"!=t.type&&"wheel"!=t.type&&(0===t.button?(e.left=!0,e.buttonName="left"):1===t.button?(e.middle=!0,e.buttonName="middle"):2===t.button?(e.right=!0,e.buttonName="right"):3===t.button?(e.back=!0,e.buttonName="back"):4===t.button?(e.forward=!0,e.buttonName="forward"):5===t.button?(e.forward=!0,e.buttonName="eraser"):e.buttonName=t.button),e.button=t.button,e},t}();HumanInput.plugins.push(p)},function(t,e,n){(function(e){t.exports=e.HumanInput=n(13)}).call(e,n(0))},function(t,e,n){(function(e){t.exports=e.HumanInput=n(14)}).call(e,n(0))}])});